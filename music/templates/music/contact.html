{% load static i18n %}
<!DOCTYPE html>
<html lang="en">
<html>


{% block content %}
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link id="theme-stylesheet" rel="stylesheet" href="{% static 'music/light.css' %}">
        <title>{% trans "Contact the Developers" %}</title>
    </head>

    <body>
        <h1>{% trans "Contact the Developers" %}</h1>
        <button id="toggle-theme">{% trans "Toggle Theme" %}</button>
        <p>{% trans "If you have any questions or feedback, feel free to send a message." %}</p>
        <form method="post">
            {% csrf_token %}
            {{ form.as_p }}
            <button type="submit" class="button">{% trans "Send Message" %}</button>
        </form>
        <script>
   function setTheme(theme) {
    const themeStylesheet = document.getElementById('theme-stylesheet');
    themeStylesheet.setAttribute('href',
        theme === 'dark' ? '{% static "music/dark.css" %}' :
        theme === 'light' ? '{% static "music/light.css" %}' :
        theme === 'colorful' ? '{% static "music/color.css" %}' :
        theme === 'orange' ? '{% static "music/orange.css" %}' :
        theme === 'red' ? '{% static "music/red.css" %}' :
        '{% static "music/light.css" %}'
    );
}

function getQueryParam(param) {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get(param);
}

function checkDateForTheme() {
    let dateKey;

    // Check for a URL-specified date (e.g., ?date=MM-DD)
    const simulatedDate = getQueryParam('date');
    if (simulatedDate) {
        dateKey = simulatedDate; // Use the date from the URL
    } else {
        // Use the real current date
        const today = new Date();
        dateKey = `${today.getMonth() + 1}-${today.getDate()}`;
    }

    // Apply themes based on the date
    if (dateKey === '10-31') {
        setTheme('orange'); // Halloween
        return true;
    } else if (dateKey === '12-25') {
        setTheme('red'); // Christmas
        return true;
    }

    return false; // No holiday theme applied
}

document.addEventListener('DOMContentLoaded', () => {
    const specialThemeApplied = checkDateForTheme();
    if (!specialThemeApplied) {
        const currentTheme = localStorage.getItem('theme') || 'light';
        setTheme(currentTheme);

        const toggleButton = document.getElementById('toggle-theme');
        if (toggleButton) {
            toggleButton.onclick = () => {
                const currentTheme = localStorage.getItem('theme') || 'light';
                const newTheme = currentTheme === 'dark' ? 'light' :
                                 currentTheme === 'light' ? 'colorful' :
                                 currentTheme === 'colorful' ? 'dark' : 'light';
                localStorage.setItem('theme', newTheme);
                setTheme(newTheme);
            };
        }
    }
});
    </script>
    </body>
{% endblock %}

</html>
