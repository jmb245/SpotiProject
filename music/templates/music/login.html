{% load static %}
<!DOCTYPE html>
<html lang="en">
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link id="theme-stylesheet" rel="stylesheet" href="{% static 'music/light.css' %}">
</head>
<body>
<!-- music/templates/music/login.html -->
<h1>Log In</h1>
<form method="post">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit">Log In</button>
</form>
<p>Donâ€™t have an account? <a href="{% url 'signup' %}">Sign up here</a></p>
<button id="toggle-theme">Toggle Theme</button>
<script>
    function setTheme(theme) {
            const themeStylesheet = document.getElementById('theme-stylesheet');
            themeStylesheet.setAttribute('href',
                theme === 'dark' ? '{% static 'music/dark.css' %}' :
                theme === 'light' ? '{% static 'music/light.css' %}' :
                '{% static 'music/color.css' %}' // Colorful theme
            );
            console.log("The theme has been changed!")
        }

        document.addEventListener('DOMContentLoaded', () => {
            const currentTheme = localStorage.getItem('theme') || 'light';
            setTheme(currentTheme); // Set the initial theme based on stored value

            const toggleButton = document.getElementById('toggle-theme');
            toggleButton.textContent = 'Switch Theme'; // Update button text

            toggleButton.onclick = () => {
                // Retrieve the current theme again
                const currentTheme = localStorage.getItem('theme') || 'light';
                const newTheme = currentTheme === 'dark' ? 'light' :
                                 currentTheme === 'light' ? 'colorful' : 'dark'; // Cycle through themes
                localStorage.setItem('theme', newTheme); // Store new theme
                setTheme(newTheme); // Apply new theme
                toggleButton.textContent = 'Switch Theme'; // Update button text
            };
        });
</script>
</body>
</html>

